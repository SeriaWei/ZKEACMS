"use strict";$(function(){function e(n,t){var i=$(this).attr("id");i=i.replace("slider_","#");$(i).text(t.value);updateDisplay()}function o(){var n=$(this).attr("id");n=n.replace("slider_","#");$(this).slider("value",$(n).text())}var u,n,i,s,f,r,h,t;$(document).on("click",".input-group .glyphicon.glyphicon-search",function(){var n=$(this);window.top.Easy.ShowUrlWindow({url:n.parent().siblings("input.form-control").data("url"),width:n.parent().siblings("input.form-control").data("width")||800,height:n.parent().siblings("input.form-control").data("height")||600,onLoad:function(t){var i=this;$(this.document).find("#confirm").click(function(){var r=n.parent().siblings("input.form-control");r.val(i.GetSelected());t.close()});$(this.document).on("click",".confirm",function(){var i=n.parent().siblings("input.form-control");i.val($(this).data("result")).trigger("change");t.close()})},zindex:101})}).on("click",".reset",function(){$("input.form-control").val("").trigger("focus").trigger("blur");$("select.form-control").each(function(){$(this).val($("option:first",this).val())});$(".border,.padding,.fontsize,.position").slider("value",0).each(function(){var n=$(this).attr("id");n=n.replace("slider_","#");$(n).text(0)});updateDisplay()});for(document.addEventListener&&document.querySelector("#background-image").addEventListener("paste",function(n){var t=n.target,i,r,e,u,f;if(n.clipboardData?i=n.clipboardData:window.clipboardData&&(i=window.clipboardData),i&&i.items)for(r=0;r<i.items.length;r++)if(i.items[r].type.indexOf("image")!==-1){t.parentNode.className=t.parentNode.className+" processing";t.value="图片上传中...";e=i.items[r].getAsFile();u=new XMLHttpRequest;u.open("POST","/admin/media/Upload");u.onload=function(n){t.parentNode.className=t.parentNode.className.replace(" processing","");var i=JSON.parse(n.target.response);i.id&&(t.value=i.url,updateDisplay())};u.onerror=function(){t.parentNode.className=t.parentNode.className.replace(" processing","");t.value="图片上传失败"};f=new FormData;f.append("file",e);f.append("folder","图片");u.send(f);break}}),u=window.top.$(".custom-style-target"),n=u.attr("style"),u.hasClass("form-control")&&u.val().replace(/style="([^"]*)"/g,function(t,i){n=i}),n||(n=""),n=n.replace(": ",":"),i=[{reg:/^width:(\d+)px/g,setValue:function(n){$("#width").val(n)}},{reg:/^height:(\d+)px/g,setValue:function(n){$("#height").val(n)}},{reg:/^background-color:(.+)/g,setValue:function(n){$("#b-color").val(n)}},{reg:/^color:(.+)/g,setValue:function(n){$("#t-color").val(n)}},{reg:/^border:(.+)/g,setValue:function(n){n.replace(/(\d+)px ([a-z|A-Z]+) (#[a-z|A-Z|0-9]+)/g,function(n,t,i,r){$("#border-width").html(t);$("#border-style").val(i);$("#bc-color").val(r)})}},{reg:/^padding:(.+)/g,setValue:function(n){n.indexOf(" ")>0?$("#padding-custom").val(n):$("#padding").text(parseInt(n))}},{reg:/^margin:(.+)/g,setValue:function(n){n.indexOf(" ")>0?$("#margin-custom").val(n):$("#margin").text(parseInt(n))}},{reg:/^font-family:(.+)/g,setValue:function(n){$("#font-name").val(n)}},{reg:/^font-style:(.+)/g,setValue:function(n){$("#font-style").val(n)}},{reg:/^font-weight:(.+)/g,setValue:function(n){$("#font-weight").val(n)}},{reg:/^font-size:(\d+)px/g,setValue:function(n){$("#font-size").text(n)}},{reg:/^font-variant:(.+)/g,setValue:function(n){$("#font-variant").val(n)}},{reg:/^line-height:(\d+)px/g,setValue:function(n){$("#line-height").text(n)}},{reg:/^text-align:(.+)/g,setValue:function(n){$("#text-align").val(n)}},{reg:/^text-decoration:(.+)/g,setValue:function(n){$("#text-decoration").val(n)}},{reg:/^text-indent:(\d+)px/g,setValue:function(n){$("#text-indent").text(n)}},{reg:/^letter-spacing:(\d+)px/g,setValue:function(n){$("#letter-spacing").text(n)}},{reg:/^word-spacing:(\d+)px/g,setValue:function(n){$("#word-spacing").text(n)}},{reg:/^text-transform:(.+)/g,setValue:function(n){$("#text-transform").val(n)}},{reg:/^background-image:url\((.+)\)/g,setValue:function(n){$("#background-image").val(n)}},{reg:/^background-repeat:(.+)/g,setValue:function(n){$("#background-repeat").val(n)}},{reg:/^background-position:(.+)/g,setValue:function(n){$("#background-position").val(n)}},{reg:/^background-attachment:(.+)/g,setValue:function(n){$("#background-attachment").val(n)}},{reg:/^background-size:(.+)/g,setValue:function(n){$("#background-size").val(n)}},{reg:/^background:(.+)/g,setValue:function(n){$("#background").val(n)}},{reg:/^position:(.+)/g,setValue:function(n){$("#position").val(n)}},{reg:/^top:(\d+)px/g,setValue:function(n){$("#position-top").val(n)}},{reg:/^left:(\d+)px/g,setValue:function(n){$("#position-left").val(n)}},{reg:/^right:(\d+)px/g,setValue:function(n){$("#position-right").val(n)}},{reg:/^bottom:(\d+)px/g,setValue:function(n){$("#position-bottom").val(n)}},{reg:/^cursor:(.+)/g,setValue:function(n){$("#cursor").val(n)}},{reg:/^visibility:(.+)/g,setValue:function(n){$("#visibility").val(n)}},{reg:/^overflow:(.+)/g,setValue:function(n){$("#overflow").val(n)}},{reg:/^float:(.+)/g,setValue:function(n){$("#float").val(n)}},{reg:/^border-radius:(.+)/g,setValue:function(n){n.indexOf("%")>=0||n.indexOf(" ")>=0?$("#border-radius-custom").val(n):$("#border-radius").text(parseInt(n))}},{reg:/^text-shadow:(.+)/g,setValue:function(n){n.replace(/(\d+)px (\d+)px (\d+)px (#[a-z|A-Z|0-9]+)/g,function(n,t,i,r,u){$("#text-h-length").html(t);$("#text-v-length").html(i);$("#text-b-length").html(r);$("#text-s-color").val(u)})}},{reg:/^box-shadow:(.+)/g,setValue:function(n){n.replace(/(\d+)px (\d+)px (\d+)px (#[a-z|A-Z|0-9]+)/g,function(n,t,i,r,u){$("#box-h-length").html(t);$("#box-v-length").html(i);$("#box-b-length").html(r);$("#box-s-color").val(u)})}},{reg:/^z-index:(\d+)/g,setValue:function(n){$("#z-index").val(n)}}],s=n.split(";"),window.unKnownStyle=[],f=0;f<s.length;f++)if(r=$.trim(s[f]),r){for(h=!1,t=0;t<i.length;t++)if(i[t].reg.test(r)){r.replace(i[t].reg,function(n,r){i[t].setValue($.trim(r))});h=!0;break}h||window.unKnownStyle.push(r)}$(".border").slider({min:0,max:30,slide:e,create:o});$(".padding").slider({min:0,max:100,slide:e,create:o});$(".border-radius").slider({min:0,max:100,slide:e,create:o});$(".fontsize").slider({min:0,max:60,slide:e,create:o});$(".color-picker").spectrum({preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,showAlpha:!0,allowEmpty:!0}).on("dragstop.spectrum",function(n,t){$(this).val(t.toHexString());updateDisplay()});updateDisplay()});