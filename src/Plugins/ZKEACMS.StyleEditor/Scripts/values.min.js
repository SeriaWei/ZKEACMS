"use strict";$(function(){function e(e,t){var n=$(this).attr("id");n=n.replace("slider_","#"),$(n).text(t.value),updateDisplay()}function t(e,t){var n=$(this).attr("id");n=n.replace("slider_","#"),$(this).slider("value",$(n).text())}if($(document).on("click",".input-group .search",function(){var e=$(this);window.top.Easy.ShowUrlWindow({url:e.parent().siblings("input.form-control").data("url"),width:e.parent().siblings("input.form-control").data("width")||800,height:e.parent().siblings("input.form-control").data("height")||600,onLoad:function(t){var n=this;$(this.document).find("#confirm").click(function(){var a=e.parent().siblings("input.form-control");a.val(n.GetSelected()),t.close()}),$(this.document).on("click",".confirm",function(){var n=e.parent().siblings("input.form-control");n.val($(this).data("result")).trigger("change"),t.close()})},zindex:101})}).on("click",".reset",function(){$("input.form-control").val("").trigger("focus").trigger("blur"),$("select.form-control").each(function(){$(this).val($("option:first",this).val())}),$(".border,.padding,.fontsize,.position").slider("value",0).each(function(){var e=$(this).attr("id");e=e.replace("slider_","#"),$(e).text(0)}),updateDisplay()}),document.addEventListener){function n(e,t,a,i){var o="/admin/media/upload";a>0&&(o="/admin/media/appendfile");var r=a+1e6;r>t.size&&(r=t.size),e.parentNode.classList.add("processing"),e.value="...";var l=new XMLHttpRequest;l.open("POST",o),r==t.size?l.onload=function(t){e.parentNode.classList.remove("processing");var n=JSON.parse(t.target.response);n.id&&(e.value="~"+n.url,updateDisplay())}:l.onload=function(a){var i=JSON.parse(a.target.response);i&&n(e,t,r,i)},l.onerror=function(){e.parentNode.classList.remove("processing"),e.value="Error!"};var s=new FormData;s.append("file",t.slice(a,r),t.name),s.append("folder","Images"),s.append("size",t.size),i&&(s.append("id",i.id),s.append("position",a)),l.send(s)}document.querySelector("#background-image").addEventListener("paste",function(e){var t,a=e.target;if(e.clipboardData?t=e.clipboardData:window.clipboardData&&(t=window.clipboardData),t&&t.items)for(var i=0;i<t.items.length;i++)if(-1!==t.items[i].type.indexOf("image")){var o=t.items[i].getAsFile();n(a,o,0);break}})}var a=window.top.$(".custom-style-target"),i=a.attr("style");a.hasClass("form-control")&&a.val().replace(/style="([^"]*)"/g,function(e,t){i=t}),i||(i=""),i=i.replace(": ",":");var o=[{reg:/^width:(\d+)px/g,setValue:function(e){$("#width").val(e)}},{reg:/^height:(\d+)px/g,setValue:function(e){$("#height").val(e)}},{reg:/^background-color:(.+)/g,setValue:function(e){$("#b-color").val(e)}},{reg:/^color:(.+)/g,setValue:function(e){$("#t-color").val(e)}},{reg:/^border:(.+)/g,setValue:function(e){e.replace(/(\d+)px ([a-z|A-Z]+) (#[a-z|A-Z|0-9]+)/g,function(e,t,n,a){$("#border-width").html(t),$("#border-style").val(n),$("#bc-color").val(a)})}},{reg:/^padding:(.+)/g,setValue:function(e){e.indexOf(" ")>0?$("#padding-custom").val(e):$("#padding").text(parseInt(e))}},{reg:/^margin:(.+)/g,setValue:function(e){e.indexOf(" ")>0?$("#margin-custom").val(e):$("#margin").text(parseInt(e))}},{reg:/^font-family:(.+)/g,setValue:function(e){$("#font-name").val(e)}},{reg:/^font-style:(.+)/g,setValue:function(e){$("#font-style").val(e)}},{reg:/^font-weight:(.+)/g,setValue:function(e){$("#font-weight").val(e)}},{reg:/^font-size:(\d+)px/g,setValue:function(e){$("#font-size").text(e)}},{reg:/^font-variant:(.+)/g,setValue:function(e){$("#font-variant").val(e)}},{reg:/^line-height:(\d+)px/g,setValue:function(e){$("#line-height").text(e)}},{reg:/^text-align:(.+)/g,setValue:function(e){$("#text-align").val(e)}},{reg:/^text-decoration:(.+)/g,setValue:function(e){$("#text-decoration").val(e)}},{reg:/^text-indent:(\d+)px/g,setValue:function(e){$("#text-indent").text(e)}},{reg:/^letter-spacing:(\d+)px/g,setValue:function(e){$("#letter-spacing").text(e)}},{reg:/^word-spacing:(\d+)px/g,setValue:function(e){$("#word-spacing").text(e)}},{reg:/^text-transform:(.+)/g,setValue:function(e){$("#text-transform").val(e)}},{reg:/^background-image:url\((.+)\)/g,setValue:function(e){$("#background-image").val(e)}},{reg:/^background-repeat:(.+)/g,setValue:function(e){$("#background-repeat").val(e)}},{reg:/^background-position:(.+)/g,setValue:function(e){$("#background-position").val(e)}},{reg:/^background-attachment:(.+)/g,setValue:function(e){$("#background-attachment").val(e)}},{reg:/^background-size:(.+)/g,setValue:function(e){$("#background-size").val(e)}},{reg:/^background:(.+)/g,setValue:function(e){$("#background").val(e)}},{reg:/^position:(.+)/g,setValue:function(e){$("#position").val(e)}},{reg:/^top:(\d+)px/g,setValue:function(e){$("#position-top").val(e)}},{reg:/^left:(\d+)px/g,setValue:function(e){$("#position-left").val(e)}},{reg:/^right:(\d+)px/g,setValue:function(e){$("#position-right").val(e)}},{reg:/^bottom:(\d+)px/g,setValue:function(e){$("#position-bottom").val(e)}},{reg:/^cursor:(.+)/g,setValue:function(e){$("#cursor").val(e)}},{reg:/^visibility:(.+)/g,setValue:function(e){$("#visibility").val(e)}},{reg:/^overflow:(.+)/g,setValue:function(e){$("#overflow").val(e)}},{reg:/^float:(.+)/g,setValue:function(e){$("#float").val(e)}},{reg:/^border-radius:(.+)/g,setValue:function(e){e.indexOf("%")>=0||e.indexOf(" ")>=0?$("#border-radius-custom").val(e):$("#border-radius").text(parseInt(e))}},{reg:/^text-shadow:(.+)/g,setValue:function(e){e.replace(/(\d+)px (\d+)px (\d+)px (#[a-z|A-Z|0-9]+)/g,function(e,t,n,a,i){$("#text-h-length").html(t),$("#text-v-length").html(n),$("#text-b-length").html(a),$("#text-s-color").val(i)})}},{reg:/^box-shadow:(.+)/g,setValue:function(e){e.replace(/(\d+)px (\d+)px (\d+)px (#[a-z|A-Z|0-9]+)/g,function(e,t,n,a,i){$("#box-h-length").html(t),$("#box-v-length").html(n),$("#box-b-length").html(a),$("#box-s-color").val(i)})}},{reg:/^z-index:(\d+)/g,setValue:function(e){$("#z-index").val(e)}}],r=i.split(";");window.unKnownStyle=[];for(var l=0;l<r.length;l++){var s=$.trim(r[l]);if(s){for(var u=!1,c=0;c<o.length;c++)if(o[c].reg.test(s)){s.replace(o[c].reg,function(e,t){o[c].setValue($.trim(t))}),u=!0;break}u||window.unKnownStyle.push(s)}}$(".border").slider({min:0,max:30,slide:e,create:t}),$(".padding").slider({min:0,max:100,slide:e,create:t}),$(".border-radius").slider({min:0,max:100,slide:e,create:t}),$(".fontsize").slider({min:0,max:60,slide:e,create:t}),$(".color-picker").spectrum({preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,showAlpha:!0,allowEmpty:!0}).on("dragstop.spectrum",function(e,t){$(this).val(t.toHexString()),updateDisplay()}),updateDisplay()});